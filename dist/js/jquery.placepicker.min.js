/*! jquery-placepicker 17-11-2014 */
+function(a,b){function c(c,d){function e(){var a='<div class="input-group"><span class="input-group-btn"><button data-toggle="collapse" href="#'+d.mapContainerId+'" class="btn btn-default"><span class="glyphicon glyphicon-globe"></span></button></span></div>';return a}function f(){if(d.mapContainerId){var b=a(c),f=b.parent();b.replaceWith(e()),f.children().append(c)}}function g(a){if(a){var b={query:a};v&&v.textSearch(b,function(a,b){if(b===google.maps.places.PlacesServiceStatus.OK)for(var c=0;c<a.length;c++)return void n(a[c])})}}function h(a){u.geocode({latLng:a},function(a,b){if(b===google.maps.GeocoderStatus.OK&&a[0]){var c=a[0];n(c,!1)}})}function i(){return p=a(d.map).get(0),p||d.mapContainerId&&(p=a("#"+d.mapContainerId+" .placepicker-map").get(0)),p?!0:!1}function j(){i()&&(q=new google.maps.Map(p,d.mapOptions),s.bindTo("bounds",q),google.maps.event.addListener(q,"click",function(a){var b=a.latLng;r.setPosition(b),q.panTo(b),c.blur(),h(b)}),r=new google.maps.Marker({map:q}),v=new google.maps.places.PlacesService(q),a(p).parent().on("show.bs.collapse",function(b){a(b.target).css("display","block"),c.value?t.resize():t.geoLocation(),a(b.target).css("display","")}))}function k(){s=new google.maps.places.Autocomplete(c,d.autoCompleteOptions),google.maps.event.addListener(s,"place_changed",function(){var a=s.getPlace();a.geometry&&n(a)})}function l(){t.resize.call(t)}function m(){if(u=new google.maps.Geocoder,f(),k(),j(),c.value)g(c.value);else{var e=d.latitude||a(d.latitudeInput).prop("value"),h=d.longitude||a(d.longitudeInput).prop("value");e&&h&&t.setLocation(e,h)}a(b).on("resize",l),a(c).on("keypress",function(a){d.preventSubmit&&13===a.keyCode&&(a.preventDefault(),a.stopImmediatePropagation())})}function n(b,e){e="undefined"==typeof e?!0:!1,w=b,t.resize();var f=b.geometry.location;e&&o(f),a(d.latitudeInput).prop("value",f.lat()),a(d.longitudeInput).prop("value",f.lng()),e||(c.value=b.formatted_address),"function"==typeof d.placeChanged&&d.placeChanged.call(t,b)}function o(a){if(q){q.setCenter(a);var b=d.icon||d.placesIcon&&place.icon?place.icon:null;if(b){var c={url:b,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(35,35)};r.setIcon(c)}r.setPosition(a),r.setVisible(!0)}}var p,q,r,s,t=this,u=null,v=null,w=null,x=null;this.setValue=function(a){c.value=a,g(a)},this.getValue=function(){return c.value},this.setLocation=function(a,b){var c=new google.maps.LatLng(a,b);this.setLatLng(c)},this.getLocation=function(){var a=this.getLatLng();return a?{latitude:a.lat(),longitude:a.lng()}:void 0},this.setLatLng=function(a){x=a,h(x)},this.getLatLng=function(){return w&&w.geometry?w.geometry.location:x},this.getMap=function(){return q},this.reload=function(){q&&g(c.value)},this.resize=function(){if(q){var a=q.getCenter();google.maps.event.trigger(q,"resize"),q.setCenter(a)}},this.geoLocation=function(a){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(b){var c=new google.maps.LatLng(b.coords.latitude,b.coords.longitude);o(c),h(c),a&&a(c)},function(){a&&a(null)}):a&&a(null)},m.call(this)}var d="placepicker",e={map:"",mapOptions:{zoom:15},places:{icons:!1},autoCompleteOptions:{},placeChanged:null,location:null,preventSubmit:!0},f=c;a.fn[d]=function(b){return this.each(function(){return a(this).data(d)||a(this).data(d,new f(this,a.extend({},e,b,a(this).data()))),a(this)})}}(jQuery,window);